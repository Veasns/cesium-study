<!--
 * @Description: 
 * @Author: Veasns
 * @Date: 2022-04-14 13:55:21
 * @LastEditTime: 2022-04-14 16:23:05
 * @LastEditors: Veasns
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="../libs/Cesium/Cesium.js"></script>
  <link rel="stylesheet" href="../libs/Cesium/Widgets/widgets.css">
  <style>
    html,body{
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <script>
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyMDIwZmQ5ZC03MTE3LTQ4ZTUtYTFhYS01MzBlZTNmYTlmMWEiLCJpZCI6NzM4NTQsImlhdCI6MTYzNzIyNTQ0N30.H2yfULRPnEYc3SZRVwujJjFU9oGN6rfd_SsKvfF6lNc'
    var viewer = new Cesium.Viewer('cesiumContainer',{
      // animation:false,
      // timeline:false
    })

    // 时间系统
    viewer.clock.shouldAnimate = true
    viewer.clock.multiplier = 1
    const start = Cesium.JulianDate.fromIso8601('2022-04-05')
    const end = Cesium.JulianDate.fromIso8601('2022-04-20')
    console.log(start,end);
    viewer.timeline.zoomTo(start,end)

    const position = new Cesium.Cartesian3.fromDegrees(114.526761, 22.674641, 2000)
    const orientation = Cesium.Transforms.headingPitchRollQuaternion(position,new Cesium.HeadingPitchRoll(-90,0,0))
    const cesiumAir = viewer.entities.add({
      position,
      orientation,
      model:{
        uri:'../libs/SampleData/models/CesiumAir/Cesium_Air.glb',
        miniPixelSize:100,
        maxiScale:10000,
        show:true
      }
    })
    viewer.camera.viewBoundingSphere(new Cesium.BoundingSphere(position,20),new Cesium.HeadingPitchRoll(0,0,0))

    // 火焰粒子
    viewer.scene.primitives.add(
      new Cesium.ParticleSystem({
        image:'../libs/SampleData/fire.png',
        imageSize:new Cesium.Cartesian2(20,20),
        startScale:1.0, //粒子开始的倍数
        endScale:4.0, //粒子结束的倍数
        particleLife:1.0, // 粒子存在的时间
        speed:5.0, //发射粒子的速度
        emitter:new Cesium.CircleEmitter(3), //圆形发射器 参数为圆的半径
        // emitter:new Cesium.BoxEmitter(new Cesium.Cartesian3(5.0, 5.0, 5.0)), //盒形发射器
        // emitter: new Cesium.ConeEmitter(Cesium.Math.toRadians(90.0)), //圆锥发射器 
        // emitter: new Cesium.SphereEmitter(5.0), //球体发射器
        emissionRate:5.0, //每秒发射粒子的数量
        modelMatrix:cesiumAir.computeModelMatrix(viewer.clock.startTime,new Cesium.Matrix4()), //粒子系统的位置  绑定的entity上
        lifetime:16.0, // 粒子系统持续运行的时间
        loop:true,
      })
    )
  </script>
</body>
</html>